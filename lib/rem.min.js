function f(a){throw a;}var g=void 0,i=!0,k=null,o=!1;function p(){return function(){}}
var s=function(){var a=0,b,c,d=this;return{get:function(e,h,j,l){l||(l=j,j=i);var m="";if(h)for(c in m="?",h=h||{},h)h.hasOwnProperty(c)&&(m+=encodeURIComponent(c)+"="+encodeURIComponent(h[c])+"&");var r="json"+ ++a;d[r]=function(a){l(a);try{delete d[r]}catch(b){}d[r]=k};var e=e+m+(j?"callback="+r:""),q=document.createElement("script"),B=o;q.src=e;q.async=i;q.onload=q.onreadystatechange=function(){if(!B&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){B=i;q.onload=q.onreadystatechange=
k;q&&q.parentNode&&q.parentNode.removeChild(q)}};b||(b=document.getElementsByTagName("head")[0]);b.appendChild(q);return r},ca:function(){return"json"+(a+1)}}}();var t;t==k&&(t={});t.S=function(a,b){if(a!=k&&b!=k)for(var c in b)a[c]=b[c]};
t.S(t,{d:function(a){if(a==k)return"";if(a instanceof Array){for(var b="";0<a.length;++a)""!=b&&(b+="&"),b+=t.d(a[0]);return b}a=encodeURIComponent(a);a=a.replace(/\!/g,"%21");a=a.replace(/\*/g,"%2A");a=a.replace(/\'/g,"%27");a=a.replace(/\(/g,"%28");return a=a.replace(/\)/g,"%29")},L:function(a){a!=k&&(a=a.replace(/\+/g," "));return decodeURIComponent(a)},s:function(a){if(a==k)return[];if("object"!=typeof a)return t.z(a+"");if(a instanceof Array)return a;var b=[],c;for(c in a)b.push([c,a[c]]);return b},
i:function(a){if(a==k)return{};if("object"!=typeof a)return t.i(t.z(a+""));if(a instanceof Array){for(var b={},c=0;c<a.length;++c){var d=a[c][0];b[d]===g&&(b[d]=a[c][1])}return b}return a},getParameter:function(a,b){if(a instanceof Array)for(var c=0;c<a.length;++c){if(a[c][0]==b)return a[c][1]}else return t.i(a)[b];return k},aa:function(a){for(var b="",a=t.s(a),c=0;c<a.length;++c){var d=a[c][1];d==k&&(d="");""!=b&&(b+="&");b+=t.d(a[c][0])+"="+t.d(d)}return b},z:function(a){for(var b=[],a=a.split("&"),
c=0;c<a.length;++c){var d=a[c];if(""!=d){var e=d.indexOf("="),h;0>e?(h=t.L(d),d=k):(h=t.L(d.substring(0,e)),d=t.L(d.substring(e+1)));b.push([h,d])}}return b},setParameter:function(a,b,c){var d=a.f;if(d instanceof Array){for(a=0;a<d.length;++a)d[a][0]==b&&(c===g?d.splice(a,1):(d[a][1]=c,c=g));c!==g&&d.push([b,c])}else d=t.i(d),d[b]=c,a.f=d},wb:function(a,b){for(var c=t.s(b),d=0;d<c.length;++d)t.setParameter(a,c[d][0],c[d][1])},gb:function(a,b){a.method==k&&(a.method="GET");var c=t.i(a.f);c.mb==k&&
t.setParameter(a,"oauth_consumer_key",b.jb||"");c.qb==k&&b.j!=k&&t.setParameter(a,"oauth_token",b.j);c.rb==k&&t.setParameter(a,"oauth_version","1.0");c.pb==k&&t.setParameter(a,"oauth_timestamp",t.timestamp());c.nb==k&&t.setParameter(a,"oauth_nonce",t.C(6));t.b.H(a,b)},Wa:function(a){t.setParameter(a,"oauth_timestamp",t.timestamp());t.setParameter(a,"oauth_nonce",t.C(6))},$a:function(a,b){newURL=a;if(b!=k){var c=t.aa(b);0<c.length&&(newURL=0>a.indexOf("?")?newURL+"?":newURL+"&",newURL+=c)}return newURL},
kb:function(a,b){for(var c='OAuth realm="'+t.d(a)+'"',d=t.s(b),e=0;e<d.length;++e){var h=d[e],j=h[0];0==j.indexOf("oauth_")&&(c+=","+t.d(j)+'="'+t.d(h[1])+'"')}return c},xa:function(a){var a=a||"oauth_timestamp",b=document.getElementsByTagName("script");if(b!=k&&b.length&&(b=b[b.length-1].src)){var c=b.indexOf("?");0>c||(parameters=t.i(t.z(b.substring(c+1))),a=parameters[a],a!=k&&t.wa(a))}},wa:function(a){t.oa=1E3*a-(new Date).getTime()},oa:0,timestamp:function(){return Math.floor(((new Date).getTime()+
t.oa)/1E3)},C:function(a){for(var b=t.C.pa,c="",d=0;d<a;++d)var e=Math.floor(Math.random()*b.length),c=c+b.substring(e,e+1);return c}});t.C.pa="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";t.Aa=function(a){var b=t,c=b.SignatureMethod;b.SignatureMethod=a;if(a!=k&&c!=k)for(var d in c)"prototype"!=d&&(a[d]=c[d])};t.Aa(p());
t.S(t.b.prototype,{H:function(a){var b=t.b.Da(a),b=this.Ea(b);t.setParameter(a,"oauth_signature",b);return b},Fa:function(a,b){this.key=t.d(b.sa!=k&&9<a.length&&"-Accessor"==a.substring(a.length-9)?b.sa:b.va)+"&"+t.d(b.k)}});
t.S(t.b,{H:function(a,b){var c=t.i(a.f).ob;if(c==k||""==c)c="HMAC-SHA1",t.setParameter(a,"oauth_signature_method",c);t.b.Ja(c,b).H(a)},Ja:function(a,b){var c=t.b.J[a];if(c!=k){var d=new c;d.Fa(a,b);return d}var c=Error("signature_method_rejected"),e="";for(d in t.b.J)""!=e&&(e+="&"),e+=t.d(d);c.lb=e;f(c)},J:{},la:function(a,b){for(var c=0;c<a.length;++c)t.b.J[a[c]]=b},ga:function(a){function b(){c.call(this)}var c=t.b;b.prototype=new c;b.prototype.Ea=a;return b.prototype.constructor=b},Da:function(a){var b=
a.action,c=b.indexOf("?");if(0>c)c=a.f;else for(var c=t.z(b.substring(c+1)),d=t.s(a.f),e=0;e<d.length;++e)c.push(d[e]);return t.d(a.method.toUpperCase())+"&"+t.d(t.b.La(b))+"&"+t.d(t.b.Ka(c))},La:function(a){var b=t.b.Sa(a),a=b.protocol.toLowerCase(),c=b.cb.toLowerCase();if("http"==a&&80==b.port||"https"==a&&443==b.port){var d=c.lastIndexOf(":");0<=d&&(c=c.substring(0,d))}(b=b.path)||(b="/");return a+"://"+c+b},Sa:function(a){for(var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
a=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),c={},d=14;d--;)c[b[d]]=a[d]||"";return c},Ka:function(a){if(a==k)return"";for(var b=t.s(a),a=[],c=0;c<b.length;++c){var d=b[c];"oauth_signature"!=d[0]&&a.push([t.d(d[0])+" "+t.d(d[1]),d])}a.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});b=[];for(c=0;c<a.length;++c)b.push(a[c][1]);return t.aa(b)}});t.b.la(["PLAINTEXT","PLAINTEXT-Accessor"],t.b.ga(function(){return this.key}));
t.b.la(["HMAC-SHA1","HMAC-SHA1-Accessor"],t.b.ga(function(a){u="=";var b=this.key,c=v(b);16<c.length&&(c=w(c,b.length*x));for(var d=Array(16),b=Array(16),e=0;16>e;e++)d[e]=c[e]^909522486,b[e]=c[e]^1549556828;a=w(d.concat(v(a)),512+a.length*x);a=w(b.concat(a),672);c="";for(b=0;b<4*a.length;b+=3){d=(a[b>>2]>>8*(3-b%4)&255)<<16|(a[b+1>>2]>>8*(3-(b+1)%4)&255)<<8|a[b+2>>2]>>8*(3-(b+2)%4)&255;for(e=0;4>e;e++)c=8*b+6*e>32*a.length?c+u:c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
6*(3-e)&63)}return c}));try{t.xa()}catch(ba){};var u="",x=8;
function w(a,b){a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;for(var c=Array(80),d=1732584193,e=-271733879,h=-1732584194,j=271733878,l=-1009589776,m=0;m<a.length;m+=16){for(var r=d,q=e,B=h,Z=j,$=l,n=0;80>n;n++){c[n]=16>n?a[m+n]:(c[n-3]^c[n-8]^c[n-14]^c[n-16])<<1|(c[n-3]^c[n-8]^c[n-14]^c[n-16])>>>31;var aa=y(y(d<<5|d>>>27,20>n?e&h|~e&j:40>n?e^h^j:60>n?e&h|e&j|h&j:e^h^j),y(y(l,c[n]),20>n?1518500249:40>n?1859775393:60>n?-1894007588:-899497514)),l=j,j=h,h=e<<30|e>>>2,e=d,d=aa}d=y(d,r);e=y(e,q);h=y(h,B);
j=y(j,Z);l=y(l,$)}return[d,e,h,j,l]}function y(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function v(a){for(var b=[],c=(1<<x)-1,d=0;d<a.length*x;d+=x)b[d>>5]|=(a.charCodeAt(d/x)&c)<<32-x-d%32;return b};(function(){var a={},b=window,c=b.document,d;a.disabled=o;a.set=p();a.get=p();a.remove=p();a.clear=p();a.Ab=function(b,c){var d=a.get(b);"undefined"==typeof d&&(d={});c(d);a.set(b,d)};a.R=function(a){return JSON.stringify(a)};a.M=function(a){return"string"!=typeof a?g:JSON.parse(a)};var e;try{e="localStorage"in b&&b.localStorage}catch(h){e=o}if(e)d=b.localStorage,a.set=function(b,c){if(c===g)return a.remove(b);d.setItem(b,a.R(c))},a.get=function(b){return a.M(d.getItem(b))},a.remove=function(a){d.removeItem(a)},
a.clear=function(){d.clear()};else{var j;try{j="globalStorage"in b&&b.globalStorage&&b.globalStorage[b.location.hostname]}catch(l){j=o}if(j)d=b.globalStorage[b.location.hostname],a.set=function(b,c){if(c===g)return a.remove(b);d[b]=a.R(c)},a.get=function(b){return a.M(d[b]&&d[b].value)},a.remove=function(a){delete d[a]},a.clear=function(){for(var a in d)delete d[a]};else if(c.documentElement.addBehavior){var m,r;try{r=new ActiveXObject("htmlfile"),r.open(),r.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),
r.close(),m=r.Bb.frames[0].document,d=m.createElement("div")}catch(q){d=c.createElement("div"),m=c.body}b=function(b){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(d);m.appendChild(d);d.addBehavior("#default#userData");d.load("localStorage");c=b.apply(a,c);return m.removeChild(d),c}};a.set=b(function(b,c,d){if(d===g)return a.remove(c);b.setAttribute(c,a.R(d));b.save("localStorage")});a.get=b(function(b,c){return a.M(b.getAttribute(c))});a.remove=b(function(a,b){a.removeAttribute(b);
a.save("localStorage")});a.clear=b(function(a){var b=a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var c=0,d;d=b[c];c++)a.removeAttribute(d.name);a.save("localStorage")})}}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=i),a.remove("__storejs__")}catch(B){a.disabled=i}"undefined"!=typeof module?module.Ba=a:"function"==typeof define&&define.bb?define(a):this.xb=a})();var z={m:function(a,b){a.zb=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:o}})}};function A(){}function C(a,b){return a.hasOwnProperty.call(a.v||(a.v={}),b)?a.v[b]:a.v[b]=[]}A.prototype.G=A.prototype.addListener=function(a,b){0!==this.ra&&C(this,a).push(b)>(this.ra||10)&&console&&console.warn("Possible EventEmitter memory leak detected. "+this.v[a].length+" listeners added. Use emitter.setMaxListeners() to increase limit.");this.c("newListener",a,b);return this};
A.prototype.c=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,d=C(this,a).slice();c<d.length;c++)d[c].apply(this,b);return d.length};z.I=A;z.Z=function(a,b){var c=[];a.G("data",function(a){c.push(a)});a.G("end",function(){b(c.join(""))})};
z.Ra=function(a){var b=document.createElement("a");b.href=-1==a.indexOf(":")||-1<a.indexOf("?")&&a.indexOf(":")>a.indexOf("?")||-1<a.indexOf("#")&&a.indexOf(":")>a.indexOf("#")?"fake:"+a:a;return{protocol:b.protocol&&"fake:"!=b.protocol?b.protocol:k,g:b.g||k,hostname:b.hostname||k,port:b.port||k,pathname:b.pathname,e:z.o.parse(b.search||""),hash:b.hash?decodeURIComponent(b.hash.substr(1)):k}};
z.Ca=function(a){var b=document.createElement("a");b.href="http://example.com";b.protocol=a.protocol||"http:";b.g=a.g;b.hostname=a.hostname;a.port&&(b.port=a.port);b.pathname=a.pathname;z.o.stringify(a.e)&&(b.search=z.o.stringify(a.e));a.hash&&(b.hash=a.hash);return b.href};
z.o={parse:function(a){for(var b={},a=a.replace(/^\?/,"").replace(/\+/g," ").split("&"),c=0,d=a.length,e;c<d;c++)a[c]&&(e=a[c].split("="),b[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return b},stringify:function(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+(a[c]==k?"":"="+encodeURIComponent(a[c])));return b.join("&")}};z.m(D,z.I);
function D(a,b){var c=0;this.url=a;this.statusText=b.statusText;this.q=b.status;b.onreadystatechange=function(){3==b.readyState&&(this.c("data",b.responseText.substr(c)),c=b.responseText.length);4==b.readyState&&(c<b.responseText.length&&this.c("data",b.responseText.substr(c)),this.c("end"))}.bind(this)}function ca(a){return a.replace(/(?:^|\b)\w/g,function(a){return a.toUpperCase()})}
z.Va=function(a,b){var c=String(a.url),d=new XMLHttpRequest;d.onreadystatechange=function(){if(2==d.readyState){var a=new D(c,d);b(k,a)}};var e="accept-charset accept-encoding access-control-request-headers access-control-request-method connection content-length cookie cookie2 content-transfer-encoding date dnt expect host keep-alive origin referer te trailer transfer-encoding upgrade user-agent via".split(" ");d.open(a.method,c,i);for(var h in a.headers)-1==e.indexOf(h)&&d.setRequestHeader(ca(h),
a.headers[h]);var j=[];return{write:function(a){j.push(a)},end:function(a){0<arguments.length&&j.push(a);d.send(j.length?j.join(""):k)}}};z.O=function(){var a=Array.prototype.slice.call(arguments),b=document.createElement("a");b.href=window.location.href;b.pathname=a.join("/").replace(/\/+/g,"/");return b.pathname.substr(a[0]&&"/"==a[0][0]?0:1)};
"undefined"!=typeof window.DOMParser?z.ha=function(a,b){b((new window.DOMParser).parseFromString(a,"text/xml"))}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")?z.ha=function(a,b){var c=new window.ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(a);b(c)}:f(Error("No XML parser found"));z.Ha=function(){f(Error("Cannot synchronously load manifests in the browser. Use rem.loadAsync instead."))};
z.Ga=function(a,b){var c=a.match(/^\.\/|\/\//)?a:"http://www.remlib.org/m/"+z.O("/",a).replace(/^\//,"");E.P(c).get(b)};z.da=function(a){return"[object Array]"===Object.prototype.toString.call(a)};z.tb=function(a,b){var c=prompt(a);setTimeout(function(){b(c===k,c)})};
z.ka=function(a,b,c){if(!b.options.key&&!store.get("rem:"+b.a.id+":key")){if(!(a=prompt("API key: ")))return;b.options.key=a;store.set("rem:"+b.a.id+":key",a);if(!(a=prompt("API secret: ")))return;b.options.ma=a;store.set("rem:"+b.a.id+":secret",a)}else b.options.key||(b.options.key=store.get("rem:"+b.a.id+":key"),b.options.ma=store.get("rem:"+b.a.id+":secret"));c(b)};z.ja=function(a,b,c,d){a.Ta(b,c,d)};
z.Na=function(a){!a.a.ya&&!a.a.ea&&console.error("Warning: API does not specify explicit support for JSONP or CORS. Only same-origin requests allowed.");!a.a.ya&&a.a.ea&&(a.U(function(b,c){"GET"!=b.method&&f(Error("Only GET calls can be made from a JSONP API."));b.url.e[a.a.ea]=s.ca();c()}),a.send=function(a,c){var d=String(a.url);s.get(d,k,o,function(a){var b=new A;b.url=d;b.statusText="";b.q=200;c(k,b);b.c("data",JSON.stringify(a));b.c("end")})})};function F(a){function b(){return b.call.apply(b,arguments)}b.__proto__=a;return b}function G(a){return JSON.parse(JSON.stringify(a))}function H(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&b[c]!=k&&(a[c]=b[c]);return a}function I(){}I.prototype.U=function(a){(this.W||(this.W=[])).push(a)};I.prototype.Ia=function(){function a(){0==d.length?c():d.shift().apply(this,b.concat([a.bind(this)]))}var b=Array.prototype.slice.call(arguments),c=b.pop(),d=(this.W||[]).slice();a.call(this)};
var J="undefined"!==typeof module&&module.Ba?"node":"browser";"node"==J&&(z=require("./node/env"));var E="node"==J?exports:this.ub={};E.userAgent="Mozilla/5.0 (compatible; REMbot/1.0; +http://remlib.org/)";E.r=z;E.na={P:function(a){return JSON.stringify(a).replace(/[\u007f-\uffff]/g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})},form:function(a){return z.o.stringify(a)}};
E.n={yb:function(a,b){b(a)},fb:function(a,b){z.Z(a,b)},text:function(a,b){z.Z(a,function(a){b(String(a).replace(/^\uFEFF/,""))})},P:function(a,b){E.n.text(a,function(a){try{a=JSON.parse(String(a))}catch(d){console.error("Invalid JSON:",a),f(d)}b(a)})},xml:function(a,b){E.n.text(a,function(c){try{z.ha(a,b)}catch(d){console.error("Invalid XML:",c),f(d)}b(c)})}};function K(a){this.pathname=this.port=this.hostname=this.g=this.protocol=g;this.e={};this.hash=g;a&&this.parse(a)}K.prototype.toString=function(){return z.Ca(this)};
function L(a,b){a.protocol=b.protocol||a.protocol;a.g=b.g||a.g;a.hostname=b.hostname||a.hostname;a.port=b.port||a.port;a.pathname=b.pathname||a.pathname;H(a.e,b.e);a.hash=b.hash||a.hash}K.prototype.parse=function(a){L(this,z.Ra(a))};function M(){this.method="GET";this.headers={};this.url=new K;this.body=k}M.prototype.send=function(a,b){return z.Va(this,b)};function N(a,b,c){this.p=a;this.$=b||"json";this.X=c}
[["get","GET"],["head","HEAD"],["del","DELETE"]].forEach(function(a){var b=a[1];N.prototype[a[0]]=function(a,d){1==arguments.length&&(d=a,a=k);this.p.method=b;H(this.p.url.e,a||{});return this.X(d)}});
[["post","POST"],["put","PUT"],["patch","PATCH"]].forEach(function(a){var b=a[1];N.prototype[a[0]]=function(a,d,e,h){3==arguments.length&&("string"==typeof a?(h=e,e=d,d=this.$):(h=e,e=d,d=a,a=k));2==arguments.length&&(h=d,e=a,d=this.$,a=k);1==arguments.length&&(h=a,a=d=e=k);this.p.method=b;H(this.p.url.e,a||{});if(e){var j=this.p,l=this.p,m=d;if("object"==typeof m&&!z.da(m)){if("form"==l||"application/x-www-form-urlencoded"==l)l="application/x-www-form-urlencoded",m=E.na.form(m);if("json"==l||"application/json"==
l)l="application/json",m=E.na.P(m)}j.headers["content-length"]=m.length;j.headers["content-type"]=l;j.body=m}return this.X(h)}});z.m(O,require("stream").Ya);function O(){this.u=[];this.Ua=this.writable=i;this.paused=this.ended=this.N=o}O.prototype.pause=function(){this.paused=i};O.prototype.write=function(a){this.ended&&f(Error("Writing after stream ended."));this.paused?this.u.push(a):this.c("data",a);return i};
O.prototype.end=function(a){this.ended&&f(Error("Ending after stream ended."));a&&this.write(a);this.ended=i;this.paused||(this.c("end"),this.N=i)};z.m(P,z.I);
function P(){this.input=new O;this.writable=i;this.t=new O;this.Ua=i;["error","close","drain","pipe"].forEach(function(a){this.G(a,this.input.c.bind(this.input,a))}.bind(this));["write","end"].forEach(function(a){this[a]=this.input[a].bind(this.input)}.bind(this));["error","close","data","end"].forEach(function(a){this.t.G(a,this.c.bind(this,a))}.bind(this));["pause","resume","pipe"].forEach(function(a){this[a]=this.t[a].bind(this.t)}.bind(this))}var da=P;
function Q(a){this.options={A:"json"};a&&this.K(a);this.U(function(a,c){a.headers["user-agent"]=a.headers["user-agent"]||E.userAgent;c()})}
function R(a,b,c){var d="object"==typeof b[b.length-1]?b.pop():{},b=(-1!=(b[0]||"").indexOf("//")?b.shift():b.length?"/":"")+(b.length?z.O.apply(k,b):""),b=new K(b);H(b.e,d);var e=new M;L(e.url,b);return new N(e,a.options.T,function(b){var d=new da;d.input.pause();a.Ia(e,function(){a.debug&&console.error(String(e.method).green,String(e.url).B,e.body?("[body: "+(e.body.length?e.body.length+" bytes":"stream")+"]").B:"");c(e,d,b)});return d})}
function S(a,b){return function(c,d){a.debug&&(d?console.error(String(d.q).green,("[type: "+String(d.headers["content-type"])+"]").B,("[body: "+String(d.headers["content-length"])+"]").B):console.error("ERROR".green,String(c).B));b.apply(this,arguments)}}z.m(Q,I);Q.prototype.K=function(a){H(this.options,a);return this};
for(var ea in E.n)(function(a){Q.prototype[a]=function(){return R(this,Array.prototype.slice.call(arguments),function(b,c,d){this.send(b,c,S(this,function(b,h){h.ia(c.t);E.n[a](h,function(a){d&&d.call(this,400<=h.q?h.q:0,a,h)})}.bind(this)))}.bind(this))}})(ea);Q.prototype.call=function(){return R(this,Array.prototype.slice.call(arguments),function(a,b,c){this.send(a,b,S(this,function(a,e){b.t.ia(e);this.Qa(e,function(a){c&&c.call(this,400<=e.q?e.q:0,a,e)}.bind(this))}.bind(this)))}.bind(this))};
Q.prototype.Qa=function(a,b){E.n[this.options.A](a,b)};Q.prototype.send=function(a,b,c){c=a.send(this.ab,c);if(!a.body&&-1!=["PUT","POST","PATCH"].indexOf(a.method)){if(b.input.ia(c),a=b.input,a.paused=o,a.u.length&&(a.c("data",Buffer.concat(a.u)),a.u=[]),a.ended&&!a.N)a.c("end"),a.N=i}else a.body!=k&&c.write(a.body),c.end()};
function T(a,b){this.a=a;this.a.ua=this.a.ua||["key","secret"];Q.call(this,b);this.U(function(a,b){if(this.a.w){var e=a.url.pathname.replace(/^(?!\/)/,"/");if(z.da(this.a.w)){var h="";this.a.w.some(function(a){if(e.match(RegExp(a[0])))return h=a[1],i})}else h=String(this.a.w);h&&(a.url.protocol||a.url.hostname)&&f(Error("Full URL request does not match API base URL: "+String(a.url)));L(a.url,new K(h));a.url.pathname=z.O(a.url.pathname,e)}this.a.ta&&(a.url.pathname=this.a.ta+a.url.pathname);this.a.Xa&&
(a.url.pathname+=this.a.Xa);if(this.a.Y){var j=this.a.Y,l;for(l in j)a.url.e[l]=this.options[this.a.Y[l]]}if(this.a.Pa)for(l in j=this.a.Pa,j)a.url.e[l]=j[l];b()}.bind(this))}z.m(T,Q);T.prototype.K=function(a){H(this.options,a);this.a.ba&&(this.a.ba[this.options.A]||f(Error('Format "'+this.options.A+'" is not explicitly defined in this manifest. Please specify an available format this API supports.')),H(this.a,this.a.ba[this.options.A]));this.options.T=this.options.T||this.a.T;return this};
T.prototype.ja=function(a,b){b||(b=a,a={});z.ja(E,this,a,b);return this};T.prototype.ka=function(a){z.ka(E,this,a);return this};E.qa=Q;E.V=T;E.za=function(a){"string"==typeof a&&(a={w:a});a=F(new T(a,g));E.r.Na(a);return a};
function U(a,b,c,d){c=c=Number(c)||"*";if(!a||!a[c])"*"==c&&a?(c=Object.keys(a).sort().pop(),a[c]||f(Error("Unable to find API "+JSON.stringify(b)+" version "+JSON.stringify(Number(c))+'. For the latest API, use "*".'))):(a&&f(Error("Unable to find API "+JSON.stringify(b)+" version "+JSON.stringify(Number(c))+'. For the latest API, use "*".')),f(Error("Unable to find API "+JSON.stringify(b)+".")));a=a[c];a.version=c;return E.za(a).K(d)}E.hb=function(a,b,c){return U(z.Ha(),a,b,c)};
E.ib=function(a,b,c,d){d||(d=c,c={});z.Ga(a,function(e,h){e?d(e):d(k,U(h,a,b,c))})};var V=new E.qa;Object.keys(E.n).forEach(function(a){E[a]=function(){return V[a].apply(V,arguments)}});"node"==J&&(require("./node/oauth"),require("./node/basic"));function F(a){function b(){return b.call.apply(b,arguments)}b.__proto__=a;return b}function G(a){return JSON.parse(JSON.stringify(a))}function H(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&b[c]!=k&&(a[c]=b[c]);return a}
function W(a,b,c,d){b.j=b.j||a.options.F;b.k=b.k||a.options.D;var e={va:a.options.ma},a={action:b.url,method:"GET",f:[["oauth_consumer_key",a.options.key],["oauth_signature_method","HMAC-SHA1"]]};b.j!=i&&a.f.push(["oauth_token",b.j]);b.k!=i&&(e.k=b.k);a.f.push.apply(a.f,c);a.f.push(["callback",s.ca()]);t.Wa(a);t.b.H(a,e);s.get(a.action,t.i(a.f),o,d)}function X(a,b){E.V.apply(this,arguments);this.l=this.a.g}E.r.m(X,E.V);
X.prototype.send=function(a,b){var c=[],d;for(d in a.e)c.push([d,a.e[d]]);d=String(a.url).replace(/\?.*$/,"");W(this,{url:d},c,function(a){var c=new E.r.I;b(k,c);c.c("data",JSON.stringify(a));c.c("end")})};function Y(a,b){this.h=a;this.l=this.h.a.g;this.Oa=!b;!b&&!this.l.Oa&&f(Error("Out-of-band OAuth for this API is not permitted."));this.Q=b||this.l.sb||g}
Y.prototype.start=function(a){W(this.h,{url:this.l.vb,j:i,k:i},[],function(b){b=E.r.o.parse(b);a(this.l.eb+"?oauth_token="+b.oauth_token+"&oauth_callback="+this.Q,b.oauth_token,b.oauth_token_secret,b)}.bind(this))};
Y.prototype.complete=function(a,b,c){W(this.h,{url:this.l.Za,j:a,k:b},[],function(a){a=E.r.o.parse(a);store.set("rem:oauth:"+this.h.a.id+":accessToken",a.oauth_token);store.set("rem:oauth:"+this.h.a.id+":accessSecret",a.oauth_token_secret);this.fa({F:a.oauth_token,D:a.oauth_token_secret},function(a){c(k,a)})}.bind(this))};Y.prototype.fa=function(a,b){var c=G(this.h.options);c.F=a.F;c.D=a.D;c.Q=this.Q;b(F(new X(this.h.a,c)))};E.Ma=function(a,b){return new Y(a,b)};
E.Ta=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a.shift();a.pop();a=window.location.href.replace(/[\?\#].*$/,"");a=E.Ma(c,a);store.get("rem:oauth:"+c.a.id+":accessToken")&&store.get("rem:oauth:"+c.a.id+":accessSecret")?a.fa({F:store.get("rem:oauth:"+c.a.id+":accessToken"),D:store.get("rem:oauth:"+c.a.id+":accessSecret")},function(a){b(k,a)}):-1<window.location.search.indexOf("oauth_token")&&store.get("rem:oauth:"+c.a.id+":requestToken")&&store.get("rem:oauth:"+c.a.id+":requestSecret")?
a.complete(store.get("rem:oauth:"+c.a.id+":requestToken"),store.get("rem:oauth:"+c.a.id+":requestSecret"),b):a.start(function(a,b,h){store.set("rem:oauth:"+c.a.id+":requestToken",b);store.set("rem:oauth:"+c.a.id+":requestSecret",h);window.location.href=a}.bind(this))};
