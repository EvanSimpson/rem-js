var e=void 0,g=!0,h=null,j=!1;function q(){return function(){}}
var r=function(){var a=0,b,c,d=this;return{get:function(f,i,k,l){l||(l=k,k=g);var n="";if(i)for(c in n="?",i=i||{},i)i.hasOwnProperty(c)&&(n+=encodeURIComponent(c)+"="+encodeURIComponent(i[c])+"&");var o="json"+ ++a;d[o]=function(a){l(a);try{delete d[o]}catch(b){}d[o]=h};var f=f+n+(k?"callback="+o:""),p=document.createElement("script"),z=j;p.src=f;p.async=g;p.onload=p.onreadystatechange=function(){if(!z&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){z=g;p.onload=p.onreadystatechange=
h;p&&p.parentNode&&p.parentNode.removeChild(p)}};b||(b=document.getElementsByTagName("head")[0]);b.appendChild(p);return o},X:function(){return"json"+(a+1)}}}();var s;s==h&&(s={});s.P=function(a,b){if(a!=h&&b!=h)for(var c in b)a[c]=b[c]};
s.P(s,{d:function(a){if(a==h)return"";if(a instanceof Array){for(var b="";0<a.length;++a)""!=b&&(b+="&"),b+=s.d(a[0]);return b}a=encodeURIComponent(a);a=a.replace(/\!/g,"%21");a=a.replace(/\*/g,"%2A");a=a.replace(/\'/g,"%27");a=a.replace(/\(/g,"%28");return a=a.replace(/\)/g,"%29")},H:function(a){a!=h&&(a=a.replace(/\+/g," "));return decodeURIComponent(a)},s:function(a){if(a==h)return[];if("object"!=typeof a)return s.v(a+"");if(a instanceof Array)return a;var b=[],c;for(c in a)b.push([c,a[c]]);return b},
k:function(a){if(a==h)return{};if("object"!=typeof a)return s.k(s.v(a+""));if(a instanceof Array){for(var b={},c=0;c<a.length;++c){var d=a[c][0];b[d]===e&&(b[d]=a[c][1])}return b}return a},getParameter:function(a,b){if(a instanceof Array)for(var c=0;c<a.length;++c){if(a[c][0]==b)return a[c][1]}else return s.k(a)[b];return h},V:function(a){for(var b="",a=s.s(a),c=0;c<a.length;++c){var d=a[c][1];d==h&&(d="");""!=b&&(b+="&");b+=s.d(a[c][0])+"="+s.d(d)}return b},v:function(a){for(var b=[],a=a.split("&"),
c=0;c<a.length;++c){var d=a[c];if(""!=d){var f=d.indexOf("="),i;0>f?(i=s.H(d),d=h):(i=s.H(d.substring(0,f)),d=s.H(d.substring(f+1)));b.push([i,d])}}return b},setParameter:function(a,b,c){var d=a.e;if(d instanceof Array){for(a=0;a<d.length;++a)d[a][0]==b&&(c===e?d.splice(a,1):(d[a][1]=c,c=e));c!==e&&d.push([b,c])}else d=s.k(d),d[b]=c,a.e=d},sb:function(a,b){for(var c=s.s(b),d=0;d<c.length;++d)s.setParameter(a,c[d][0],c[d][1])},Wa:function(a,b){a.method==h&&(a.method="GET");var c=s.k(a.e);c.gb==h&&
s.setParameter(a,"oauth_consumer_key",b.Za||"");c.kb==h&&b.l!=h&&s.setParameter(a,"oauth_token",b.l);c.lb==h&&s.setParameter(a,"oauth_version","1.0");c.jb==h&&s.setParameter(a,"oauth_timestamp",s.timestamp());c.hb==h&&s.setParameter(a,"oauth_nonce",s.A(6));s.b.D(a,b)},Oa:function(a){s.setParameter(a,"oauth_timestamp",s.timestamp());s.setParameter(a,"oauth_nonce",s.A(6))},Ra:function(a,b){newURL=a;if(b!=h){var c=s.V(b);0<c.length&&(newURL=0>a.indexOf("?")?newURL+"?":newURL+"&",newURL+=c)}return newURL},
bb:function(a,b){for(var c='OAuth realm="'+s.d(a)+'"',d=s.s(b),f=0;f<d.length;++f){var i=d[f],k=i[0];0==k.indexOf("oauth_")&&(c+=","+s.d(k)+'="'+s.d(i[1])+'"')}return c},ra:function(a){var a=a||"oauth_timestamp",b=document.getElementsByTagName("script");if(b!=h&&b.length&&(b=b[b.length-1].src)){var c=b.indexOf("?");0>c||(parameters=s.k(s.v(b.substring(c+1))),a=parameters[a],a!=h&&s.qa(a))}},qa:function(a){s.ha=1E3*a-(new Date).getTime()},ha:0,timestamp:function(){return Math.floor(((new Date).getTime()+
s.ha)/1E3)},A:function(a){for(var b=s.A.ia,c="",d=0;d<a;++d)var f=Math.floor(Math.random()*b.length),c=c+b.substring(f,f+1);return c}});s.A.ia="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";s.ua=function(a){var b=s,c=b.SignatureMethod;b.SignatureMethod=a;if(a!=h&&c!=h)for(var d in c)"prototype"!=d&&(a[d]=c[d])};s.ua(q());
s.P(s.b.prototype,{D:function(a){var b=s.b.wa(a),b=this.xa(b);s.setParameter(a,"oauth_signature",b);return b},ya:function(a,b){this.key=s.d(b.la!=h&&9<a.length&&"-Accessor"==a.substring(a.length-9)?b.la:b.pa)+"&"+s.d(b.m)}});
s.P(s.b,{D:function(a,b){var c=s.k(a.e).ib;if(c==h||""==c)c="HMAC-SHA1",s.setParameter(a,"oauth_signature_method",c);s.b.Ba(c,b).D(a)},Ba:function(a,b){var c=s.b.F[a];if(c!=h){var d=new c;d.ya(a,b);return d}var c=Error("signature_method_rejected"),f="";for(d in s.b.F)""!=f&&(f+="&"),f+=s.d(d);c.fb=f;throw c;},F:{},fa:function(a,b){for(var c=0;c<a.length;++c)s.b.F[a[c]]=b},aa:function(a){function b(){c.call(this)}var c=s.b;b.prototype=new c;b.prototype.xa=a;return b.prototype.constructor=b},wa:function(a){var b=
a.action,c=b.indexOf("?");if(0>c)c=a.e;else for(var c=s.v(b.substring(c+1)),d=s.s(a.e),f=0;f<d.length;++f)c.push(d[f]);return s.d(a.method.toUpperCase())+"&"+s.d(s.b.Da(b))+"&"+s.d(s.b.Ca(c))},Da:function(a){var b=s.b.Ja(a),a=b.protocol.toLowerCase(),c=b.Ta.toLowerCase();if("http"==a&&80==b.port||"https"==a&&443==b.port){var d=c.lastIndexOf(":");0<=d&&(c=c.substring(0,d))}(b=b.path)||(b="/");return a+"://"+c+b},Ja:function(a){for(var b="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),
a=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),c={},d=14;d--;)c[b[d]]=a[d]||"";return c},Ca:function(a){if(a==h)return"";for(var b=s.s(a),a=[],c=0;c<b.length;++c){var d=b[c];"oauth_signature"!=d[0]&&a.push([s.d(d[0])+" "+s.d(d[1]),d])}a.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0});b=[];for(c=0;c<a.length;++c)b.push(a[c][1]);return s.V(b)}});s.b.fa(["PLAINTEXT","PLAINTEXT-Accessor"],s.b.aa(function(){return this.key}));
s.b.fa(["HMAC-SHA1","HMAC-SHA1-Accessor"],s.b.aa(function(a){t="=";var b=this.key,c=u(b);16<c.length&&(c=v(c,b.length*w));for(var d=Array(16),b=Array(16),f=0;16>f;f++)d[f]=c[f]^909522486,b[f]=c[f]^1549556828;a=v(d.concat(u(a)),512+a.length*w);a=v(b.concat(a),672);c="";for(b=0;b<4*a.length;b+=3){d=(a[b>>2]>>8*(3-b%4)&255)<<16|(a[b+1>>2]>>8*(3-(b+1)%4)&255)<<8|a[b+2>>2]>>8*(3-(b+2)%4)&255;for(f=0;4>f;f++)c=8*b+6*f>32*a.length?c+t:c+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(d>>
6*(3-f)&63)}return c}));try{s.ra()}catch(x){};var t="",w=8;
function v(a,b){a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;for(var c=Array(80),d=1732584193,f=-271733879,i=-1732584194,k=271733878,l=-1009589776,n=0;n<a.length;n+=16){for(var o=d,p=f,z=i,T=k,U=l,m=0;80>m;m++){c[m]=16>m?a[n+m]:(c[m-3]^c[m-8]^c[m-14]^c[m-16])<<1|(c[m-3]^c[m-8]^c[m-14]^c[m-16])>>>31;var V=y(y(d<<5|d>>>27,20>m?f&i|~f&k:40>m?f^i^k:60>m?f&i|f&k|i&k:f^i^k),y(y(l,c[m]),20>m?1518500249:40>m?1859775393:60>m?-1894007588:-899497514)),l=k,k=i,i=f<<30|f>>>2,f=d,d=V}d=y(d,o);f=y(f,p);i=y(i,z);k=
y(k,T);l=y(l,U)}return[d,f,i,k,l]}function y(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function u(a){for(var b=[],c=(1<<w)-1,d=0;d<a.length*w;d+=w)b[d>>5]|=(a.charCodeAt(d/w)&c)<<32-w-d%32;return b};!function(){var a={},b=window,c=b.document,d;a.disabled=j;a.set=q();a.get=q();a.remove=q();a.clear=q();a.wb=function(b,c){var d=a.get(b);"undefined"==typeof d&&(d={});c(d);a.set(b,d)};a.O=function(a){return JSON.stringify(a)};a.I=function(a){return"string"!=typeof a?e:JSON.parse(a)};var f;try{f="localStorage"in b&&b.localStorage}catch(i){f=j}if(f)d=b.localStorage,a.set=function(b,c){if(c===e)return a.remove(b);d.setItem(b,a.O(c))},a.get=function(b){return a.I(d.getItem(b))},a.remove=function(a){d.removeItem(a)},
a.clear=function(){d.clear()};else{var k;try{k="globalStorage"in b&&b.globalStorage&&b.globalStorage[b.location.hostname]}catch(l){k=j}if(k)d=b.globalStorage[b.location.hostname],a.set=function(b,c){if(c===e)return a.remove(b);d[b]=a.O(c)},a.get=function(b){return a.I(d[b]&&d[b].value)},a.remove=function(a){delete d[a]},a.clear=function(){for(var a in d)delete d[a]};else if(c.documentElement.addBehavior){var n,o;try{o=new ActiveXObject("htmlfile"),o.open(),o.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),
o.close(),n=o.xb.frames[0].document,d=n.createElement("div")}catch(p){d=c.createElement("div"),n=c.body}b=function(b){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(d);n.appendChild(d);d.addBehavior("#default#userData");d.load("localStorage");c=b.apply(a,c);return n.removeChild(d),c}};a.set=b(function(b,c,d){if(d===e)return a.remove(c);b.setAttribute(c,a.O(d));b.save("localStorage")});a.get=b(function(b,c){return a.I(b.getAttribute(c))});a.remove=b(function(a,b){a.removeAttribute(b);
a.save("localStorage")});a.clear=b(function(a){var b=a.XMLDocument.documentElement.attributes;a.load("localStorage");for(var c=0,d;d=b[c];c++)a.removeAttribute(d.name);a.save("localStorage")})}}try{a.set("__storejs__","__storejs__"),"__storejs__"!=a.get("__storejs__")&&(a.disabled=g),a.remove("__storejs__")}catch(z){a.disabled=g}"undefined"!=typeof module?module.va=a:"function"==typeof define&&define.Sa?define(a):this.tb=a}();var A={z:function(a,b){a.vb=b;a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:j}})}};function B(){}function C(a,b){return a.hasOwnProperty.call(a.t||(a.t={}),b)?a.t[b]:a.t[b]=[]}B.prototype.ba=B.prototype.addListener=function(a,b){0!==this.ka&&C(this,a).push(b)>(this.ka||10)&&console&&console.warn("Possible EventEmitter memory leak detected. "+this.t[a].length+" listeners added. Use emitter.setMaxListeners() to increase limit.");this.i("newListener",a,b);return this};
B.prototype.i=function(a){for(var b=Array.prototype.slice.call(arguments,1),c=0,d=C(this,a).slice();c<d.length;c++)d[c].apply(this,b)};A.R=B;A.U=function(a,b){var c=[];a.ba("data",function(a){c.push(a)});a.ba("end",function(){b(c.join(""))})};
A.nb=function(a){var b=document.createElement("a");b.href=-1==a.indexOf(":")||-1<a.indexOf("?")&&a.indexOf(":")>a.indexOf("?")||-1<a.indexOf("#")&&a.indexOf(":")>a.indexOf("#")?"fake:"+a:a;return{protocol:b.protocol&&"fake:"!=b.protocol?b.protocol:h,g:b.g||h,hostname:b.hostname||h,port:b.port||h,pathname:b.pathname,c:A.h.parse(b.search||""),hash:b.hash?decodeURIComponent(b.hash.substr(1)):h}};
A.ab=function(a){var b=document.createElement("a");b.href="fake:";b.protocol=a.protocol||"http:";b.g=a.g;b.hostname=a.hostname;a.port&&(b.port=a.port);b.pathname=a.pathname;b.search=A.h.stringify(a.c);a.hash&&(b.hash=a.hash);return b.href};
A.url={parse:function(a){var b=document.createElement("a");b.href=-1==a.indexOf(":")||-1<a.indexOf("?")&&a.indexOf(":")>a.indexOf("?")||-1<a.indexOf("#")&&a.indexOf(":")>a.indexOf("#")?"fake:"+a:a;return{protocol:b.protocol&&"fake:"!=b.protocol?b.protocol:h,g:b.g||h,hostname:b.hostname||h,port:b.port||h,pathname:b.pathname,c:A.h.parse(b.search||""),hash:b.hash?decodeURIComponent(b.hash.substr(1)):h}},f:function(a){var b=document.createElement("a");b.href="fake:";b.protocol=a.protocol||"http:";b.g=
a.g;b.hostname=a.hostname;a.port&&(b.port=a.port);b.pathname=a.pathname;b.search=A.h.stringify(a.c);a.hash&&(b.hash=a.hash);return b.href}};A.h={parse:function(a){for(var b={},a=a.replace(/^\?/,"").replace(/\+/g," ").split("&"),c=0,d=a.length,f;c<d;c++)a[c]&&(f=a[c].split("="),b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]));return b},stringify:function(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+(a[c]==h?"":"="+encodeURIComponent(a[c])));return b.join("&")}};A.z(D,A.R);
function D(a,b){var c=0;this.url=a;this.statusText=b.statusText;this.q=b.status;b.onreadystatechange=function(){3==b.readyState&&(this.i("data",b.responseText.substr(c)),c=b.responseText.length);4==b.readyState&&(c<b.responseText.length&&this.i("data",b.responseText.substr(c)),this.i("end"))}.bind(this)}
A.Ma=function(a,b){var c=A.url.f(a.url),d=new XMLHttpRequest;d.onreadystatechange=function(){if(2==d.readyState){var a=new D(c,d);b(h,a)}};var f=["host","user-agent","content-length"];d.open(a.method,c,g);var i=a.headers,k={},l;for(l in i)k[l.replace(/(?:^|\b)\w/g,function(a){return a.toUpperCase()})]=i[l];for(var n in k)-1==f.indexOf(n)&&d.setRequestHeader(n,k[n]);var o=[];return{write:function(a){o.push(a)},end:function(a){0<arguments.length&&o.push(a);d.send(o.length?o.join(""):h)}}};
A.J=function(){var a=Array.prototype.slice.call(arguments),b=document.createElement("a");b.href=window.location.href;b.pathname=a.join("/").replace(/\/+/g,"/");return b.pathname.substr(a[0]&&"/"==a[0][0]?0:1)};
if("undefined"!=typeof window.DOMParser)A.ca=function(a,b){b((new window.DOMParser).parseFromString(a,"text/xml"))};else if("undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM"))A.ca=function(a,b){var c=new window.ActiveXObject("Microsoft.XMLDOM");c.async="false";c.loadXML(a);b(c)};else throw Error("No XML parser found");A.Aa=function(){throw Error("Cannot synchronously load manifests in the browser. Use rem.loadAsync instead.");};
A.za=function(a,b){var c=a.match(/^\.\/|\/\//)?a:"http://www.remlib.org/m/"+A.J("/",a).replace(/^\//,"");E.K(c).get(b)};A.Y=function(a){return"[object Array]"===Object.prototype.toString.call(a)};A.ob=function(a,b){var c=prompt(a);setTimeout(function(){b(c===h,c)})};
A.ea=function(a,b,c){if(!b.options.key&&!store.get("rem:"+b.a.id+":key")){if(!(a=prompt("API key: ")))return;b.options.key=a;store.set("rem:"+b.a.id+":key",a);if(!(a=prompt("API secret: ")))return;b.options.ga=a;store.set("rem:"+b.a.id+":secret",a)}else b.options.key||(b.options.key=store.get("rem:"+b.a.id+":key"),b.options.ga=store.get("rem:"+b.a.id+":secret"));c(b)};A.da=function(a,b,c,d){a.Ka(b,c,d)};
A.Fa=function(a){!a.a.sa&&!a.a.Z&&console.error("Warning: API does not specify explicit support for JSONP or CORS. Only same-origin requests allowed.");!a.a.sa&&a.a.Z&&(a.N(function(b,c){if("GET"!=b.method)throw Error("Only GET calls can be made from a JSONP API.");b.url.c[a.a.Z]=r.X();c(b)}),a.send=function(a,c){var d=A.url.f(a.url);r.get(d,h,j,function(a){var b=new B;b.url=d;b.statusText="";b.q=200;c(h,b);b.i("data",JSON.stringify(a));b.i("end")})})};function F(a){function b(){return b.call.apply(b,arguments)}b.__proto__=a;return b}function G(a){return JSON.parse(JSON.stringify(a))}function H(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&b[c]!=h&&(a[c]=b[c]);return a}function I(){}I.prototype.N=function(a){this.r||(this.r={});(this.r.request||(this.r.request=[])).push(a)};
I.prototype.L=function(a){function b(){0==f.length?d():f.shift().apply(this,c.concat([b.bind(this)]))}var c=Array.prototype.slice.call(arguments,1),d=c.pop(),f=(this.r&&this.r[a]||[]).slice();b.call(this)};var J="undefined"!==typeof module&&module.va?"node":"browser";"node"==J&&(A=require("./node/env"));var E="node"==J?exports:this.pb={};E.userAgent="Mozilla/5.0 (compatible; REMbot/1.0; +http://remlib.org/)";E.o=A;
E.Na={K:function(a){return JSON.stringify(a).replace(/[\u007f-\uffff]/g,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})},form:q()};
E.p={ub:function(a,b){b(a)},Va:function(a,b){A.U(a,b)},text:function(a,b){A.U(a,function(a){b(String(a).replace(/^\uFEFF/,""))})},K:function(a,b){E.p.text(a,function(a){try{a=JSON.parse(String(a))}catch(d){throw console.error("Invalid JSON:",a),d;}b(a)})},xml:function(a,b){E.p.text(a,function(c){try{A.ca(a,b)}catch(d){throw console.error("Invalid XML:",c),d;}b(c)})}};
Url={cb:function(a){return a.hostname&&a.hostname+(a.port?":"+a.port:"")},eb:function(a){return a.pathname+(A.h.stringify(a.c)?"?"+A.h.stringify(a.c):"")+(a.hash?"#"+encodeURIComponent(a.hash):"")}};
Request={create:function(a){return Request.update({method:"GET",headers:{},url:{protocol:"",hostname:"",port:"",pathname:"",c:{},hash:""},body:h},a)},update:function(a,b){"string"==typeof b&&(b=A.url.parse(b));b.url&&(b.url.c=H(a.url?a.url.c:{},b.url.c));b.url=H(a.url||{},b.url||{});return H(a,b)},rb:function(a,b,c){if("object"==typeof c&&!A.Y(c)){if("form"==b||"application/x-www-form-urlencoded"==b)b="application/x-www-form-urlencoded",c=A.h.stringify(c);if("json"==b||"application/json"==b)b="application/json",
c=E.Na.K(c)}H(a.headers,{"content-length":c.length,"content-type":b});return H(a,{body:c})},send:h};function K(a,b,c){this.La=a;this.$a=b||"json";this.na=c}K.prototype.get=function(a,b){1==arguments.length&&(b=a,a=h);return this.na(Request.update(this.La,{url:{c:a||{}},method:"GET"}),b)};function L(a){this.options={f:"json"};a&&this.G(a);this.N(function(a,c){a.headers["user-agent"]=a.headers["user-agent"]||E.userAgent;c()})}
function M(a,b,c){var d="object"==typeof b[b.length-1]?b.pop():{},b=(-1!=(b[0]||"").indexOf("//")?b.shift():b.length?"/":"")+(b.length?A.J.apply(h,b):""),b=A.url.parse(b);H(b.c,d);return new K(Request.create({url:b}),a.options.Q,function(b,d){a.L("request",b,function(){a.debug&&console.error(String(b.method).green,String(A.url.f(b.url)).w,b.body?("[body: "+(b.body.length?b.body.length+" bytes":"stream")+"]").w:"");c(b,d)})})}
function N(a,b){return function(c,d){a.debug&&(d?console.error(String(d.q).green,("[type: "+String(d.headers["content-type"])+"]").w,("[body: "+String(d.headers["content-length"])+"]").w):console.error("ERROR".green,String(c).w));b.apply(this,arguments)}}A.z(L,I);L.prototype.G=function(a){H(this.options,a);return this};
for(var O in E.p)(function(a){L.prototype[a]=function(){return M(this,Array.prototype.slice.call(arguments),function(b,c){this.send(b,N(this,function(d,f){this.L("response",b,f,function(){E.p[a](f,function(a){c&&c.call(this,400<=f.q?f.q:0,a,f)})})}.bind(this)))}.bind(this))}})(O);L.prototype.call=function(){return M(this,Array.prototype.slice.call(arguments),function(a,b){this.send(a,N(this,function(c,d){this.L("response",a,d,function(){this.Ia(d,function(a){b&&b.call(this,400<=d.q?d.q:0,a,d)}.bind(this))}.bind(this))}.bind(this)))}.bind(this))};
L.prototype.Ia=function(a,b){E.p[this.options.f](a,b)};L.prototype.send=function(a,b){var c=A.Ma(a,b);a.body!=h&&c.write(a.body);c.end()};
function P(a,b){this.a=a;this.a.oa=this.a.oa||["key","secret"];L.call(this,b);this.N(function(a,b){if(this.a.u){var f=a.url.pathname.replace(/^(?!\/)/,"/");if(A.Y(this.a.u)){var i="";this.a.u.some(function(a){if(f.match(RegExp(a[0])))return i=a[1],g})}else i=String(this.a.u);if(i&&(a.url.protocol||a.url.hostname))throw Error("Cannot access full URL on an API with a base URL: "+A.url.f(a.url));Request.update(a,{url:A.url.parse(i)});Request.update(a,{url:{pathname:A.J(a.url.pathname,f)}})}this.a.ma&&
(a.url.pathname=this.a.ma+a.url.pathname);this.a.Pa&&(a.url.pathname+=this.a.Pa);if(this.a.T){var k=this.a.T,l;for(l in k)a.url.c[l]=this.options[this.a.T[l]]}if(this.a.Ha)for(l in k=this.a.Ha,k)a.url.c[l]=k[l];b()}.bind(this))}A.z(P,L);
P.prototype.G=function(a){H(this.options,a);if(this.a.W){if(!this.a.W[this.options.f])throw Error('Format "'+this.options.f+'" is not explicitly defined in this manifest. Please specify an available format this API supports.');H(this.a,this.a.W[this.options.f])}this.options.Q=this.options.Q||this.a.Q;return this};P.prototype.da=function(a,b){b||(b=a,a={});A.da(E,this,a,b);return this};P.prototype.ea=function(a){A.ea(E,this,a);return this};E.ja=L;E.S=P;
E.ta=function(a){"string"==typeof a&&(a={u:a});a=F(new P(a,e));E.o.Fa(a);return a};
function Q(a,b,c,d){c=c=Number(c)||"*";if(!a||!a[c])if("*"==c&&a){if(c=Object.keys(a).sort().pop(),!a[c])throw Error("Unable to find API "+JSON.stringify(b)+" version "+JSON.stringify(Number(c))+'. For the latest API, use "*".');}else{if(a)throw Error("Unable to find API "+JSON.stringify(b)+" version "+JSON.stringify(Number(c))+'. For the latest API, use "*".');throw Error("Unable to find API "+JSON.stringify(b)+".");}a=a[c];a.version=c;return E.ta(a).G(d)}
E.Xa=function(a,b,c){return Q(A.Aa(),a,b,c)};E.Ya=function(a,b,c,d){d||(d=c,c={});A.za(a,function(f,i){f?d(f):d(h,Q(i,a,b,c))})};var R=new E.ja;Object.keys(E.p).forEach(function(a){E[a]=function(){return R[a].apply(R,arguments)}});"node"==J&&(require("./node/oauth"),require("./node/basic"));function F(a){function b(){return b.call.apply(b,arguments)}b.__proto__=a;return b}function G(a){return JSON.parse(JSON.stringify(a))}function H(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&b[c]!=h&&(a[c]=b[c]);return a}
function S(a,b,c,d){b.l=b.l||a.options.C;b.m=b.m||a.options.B;var f={pa:a.options.ga},a={action:b.url,method:"GET",e:[["oauth_consumer_key",a.options.key],["oauth_signature_method","HMAC-SHA1"]]};b.l!=g&&a.e.push(["oauth_token",b.l]);b.m!=g&&(f.m=b.m);a.e.push.apply(a.e,c);a.e.push(["callback",r.X()]);s.Oa(a);s.b.D(a,f);r.get(a.action,s.k(a.e),j,d)}function W(a,b){E.S.apply(this,arguments);this.n=this.a.g}E.o.z(W,E.S);
W.prototype.send=function(a,b){var c=[],d;for(d in a.c)c.push([d,a.c[d]]);d=E.o.url.f(a.url).replace(/\?.*$/,"");S(this,{url:d},c,function(a){var c=new E.o.R;b(h,c);c.i("data",JSON.stringify(a));c.i("end")})};function X(a,b){this.j=a;this.n=this.j.a.g;this.Ga=!b;if(!b&&!this.n.Ga)throw Error("Out-of-band OAuth for this API is not permitted.");this.M=b||this.n.mb||e}
X.prototype.start=function(a){S(this.j,{url:this.n.qb,l:g,m:g},[],function(b){b=E.o.h.parse(b);a(this.n.Ua+"?oauth_token="+b.oauth_token+"&oauth_callback="+this.M,b.oauth_token,b.oauth_token_secret,b)}.bind(this))};
X.prototype.complete=function(a,b,c){S(this.j,{url:this.n.Qa,l:a,m:b},[],function(a){a=E.o.h.parse(a);store.set("rem:oauth:"+this.j.a.id+":accessToken",a.oauth_token);store.set("rem:oauth:"+this.j.a.id+":accessSecret",a.oauth_token_secret);this.$({C:a.oauth_token,B:a.oauth_token_secret},function(a){c(h,a)})}.bind(this))};X.prototype.$=function(a,b){var c=G(this.j.options);c.C=a.C;c.B=a.B;c.M=this.M;b(F(new W(this.j.a,c)))};E.Ea=function(a,b){return new X(a,b)};
E.Ka=function(){var a=Array.prototype.slice.call(arguments),b=a.pop(),c=a.shift();a.pop();a=window.location.href.replace(/[\?\#].*$/,"");a=E.Ea(c,a);store.get("rem:oauth:"+c.a.id+":accessToken")&&store.get("rem:oauth:"+c.a.id+":accessSecret")?a.$({C:store.get("rem:oauth:"+c.a.id+":accessToken"),B:store.get("rem:oauth:"+c.a.id+":accessSecret")},function(a){b(h,a)}):-1<window.location.search.indexOf("oauth_token")&&store.get("rem:oauth:"+c.a.id+":requestToken")&&store.get("rem:oauth:"+c.a.id+":requestSecret")?
a.complete(store.get("rem:oauth:"+c.a.id+":requestToken"),store.get("rem:oauth:"+c.a.id+":requestSecret"),b):a.start(function(a,b,i){store.set("rem:oauth:"+c.a.id+":requestToken",b);store.set("rem:oauth:"+c.a.id+":requestSecret",i);window.location.href=a}.bind(this))};
